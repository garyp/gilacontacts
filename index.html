<!doctype html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width" />
    <title>Gila Contacts</title>
    <!--
    <link rel="stylesheet" href="assets/css/master.css" type="text/css" media="screen" />
    -->
    <link rel="stylesheet" href="assets/css/jquery.mobile-1.1.0.min.css" />
    <script src="phonegap.js" type="text/javascript" charset="utf-8"></script>
    <script src="childbrowser.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/jquery-1.7.2.min.js"></script>
    <script src="assets/js/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        var ourServer = "http://gilamonster.herokuapp.com/";
        var doneURL = ourServer + "done";

        $( function () {
                document.addEventListener("deviceready", onDeviceReady, false);
        });

        var destinationType;
        var childBrowser;

        function onDeviceReady() {
            destinationType = navigator.camera.DestinationType;
            childBrowser = window.plugins.childBrowser;
        }

        function onFail(message) {
            alert('Failed because: ' + message);
        }

        function onPhotoDataSuccess(imageURI) {
            alert('Got image at: ' + imageURI);
        }

        function capturePhoto() {
            navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
                destinationType: destinationType.FILE_URI,
            });
        }

        function doTwitterLogin() {
            childBrowser.onLocationChange = function(url) {
                if (url == doneURL) {
                    childBrowser.close();
                    $.mobile.changePage($("#card_entry"));
                }
            };
            childBrowser.showWebPage(ourServer + "/app/connect/twitter", {
                showLocationBar: false,
                showAddress: false,
                showNavigationBar: false,
            });
        }
    </script>
</head>
<body>
    <div data-role="page" id="login_page">
        <div data-role="header">
            <h1>Gila Contacts</h1>
        </div>

        <div data-role="content">
            <button onclick="doTwitterLogin();">Log in with Twitter</button>
<input type="radio" name="group1" value="Milk"> Milk<br>
        </div>
    </div>

    <div data-role="page" id="card_entry">
        <div data-role="header">
            <h1>Gila Contacts</h1>
        </div>

        <div data-role="content">
            <button onclick="capturePhoto();">Scan Card</button>
            <p>-- OR --</p>
            <p>Enter email: <input type="text"/></p>
        </div>
    </div>
</body>
</html>
